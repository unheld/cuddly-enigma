<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modular AppState Example</title>
<style>
  body { margin: 0; overflow: hidden; background: #111; }
  #ui { position: absolute; top: 10px; left: 10px; color: white; font-family: sans-serif; }
</style>
</head>
<body>

<div id="ui">
  <label>Effect Intensity: <span id="intensityVal">0.5</span></label><br>
  <input type="range" id="intensitySlider" min="0" max="1" step="0.01" value="0.5">
</div>

<canvas id="canvas"></canvas>

<script>
/*************** appState.js ***************/
const appState = {
  effectIntensity: 0.5,
  mouse: { x: 0, y: 0 },
};

/*************** ui.js ***************/
const intensitySlider = document.getElementById('intensitySlider');
const intensityVal = document.getElementById('intensityVal');

intensitySlider.addEventListener('input', (e) => {
  appState.effectIntensity = parseFloat(e.target.value);
  intensityVal.textContent = appState.effectIntensity.toFixed(2);
});

window.addEventListener('mousemove', (e) => {
  appState.mouse.x = e.clientX / window.innerWidth;
  appState.mouse.y = e.clientY / window.innerHeight;
});

/*************** render.js ***************/
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

/*************** effects/ripple.js ***************/
function renderRipple(appState, ctx, time) {
  const { effectIntensity, mouse } = appState;
  const w = ctx.canvas.width;
  const h = ctx.canvas.height;
  
  ctx.fillStyle = `rgba(${Math.floor(255 * mouse.x)}, ${Math.floor(255 * mouse.y)}, ${Math.floor(255 * effectIntensity)}, 0.1)`;
  ctx.fillRect(0, 0, w, h);
  
  const radius = Math.sin(time / 200) * 100 * effectIntensity + 100;
  ctx.beginPath();
  ctx.arc(mouse.x * w, mouse.y * h, radius, 0, Math.PI * 2);
  ctx.strokeStyle = `rgba(255, 255, 255, ${effectIntensity})`;
  ctx.lineWidth = 5;
  ctx.stroke();
}

/*************** main loop ***************/
let lastTime = 0;
function render(time) {
  renderRipple(appState, ctx, time);
  requestAnimationFrame(render);
}
requestAnimationFrame(render);
</script>

</body>
</html>